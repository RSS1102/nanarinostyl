@import './../variable/prefix.styl'
@import './../variable/functions.styl'
@import './../variable/compatible.styl'


/**
 * @init 初始背景色
 * @transparent 透过的按钮当前颜色
 *
 * 当 变量 --percent-button-wave 从 0% -> 100% 时 按钮当前颜色从中心扩散
 * 一般来说 按钮当前颜色要比初始背景色要深
 *
 * 在此之前使用radial-gradient(1%) 然后控制 background-size 100% -> 15000% 来实现 
 * 兼容性更好 见 https://github.com/Deep-Codes/affinity-css/blob/main/components/_button.sass
 */
button_background_color_init(background_color)
    background-color background_color 
    background-image radial-gradient(circle, 
        transparent 0%,
        transparent var(--percent-button-wave),
        background_color var(--percent-button-wave), 
        background_color 100%
    )


.{prefix}-button
    /:root
        --padding-button 5px 12px
        @property --percent-button-wave
            syntax '<percentage>'
            inherits false
            initial-value: 100%

    --color-button var(--white)
    --color-button-disabled var(--white)
    --background-color-button var(--primary-5)
    --background-color-button-focus var(--primary-6)
    --background-color-button-disabled var(--primary-2)
    
    cursor pointer
    user-select none
    padding var(--padding-button)
    font-size var(--font-size-body)
    line-height var(--line-height-body)
    border-radius var(--border-radius-md)
    border none
    transition --percent-button-wave .8s, box-shadow .3s
    color _rgb(var(--color-button))
    button_background_color_init _rgb(var(--background-color-button))
    &:focus-visible
        outline-color _rgb(var(--outline-color-focus))
    &:not([disabled]):hover
        box-shadow var(--box-shadow-drop-bottom)
    &[disabled]
        cursor not-allowed
        color _rgb(var(--color-button-disabled))
        background-color _rgb(var(--background-color-button-disabled))
    &:not([disabled]):focus
        background-color _rgb(var(--background-color-button-focus))
    &:not([disabled]):active
        --percent-button-wave 0%
        transition none

    &.sm
        --padding-button 1px 8px
    &.lg
        --padding-button 8px 16px
    
    /**
     * 不使用主题
     */
    &:where(:not([data-primary]))
        // color unset // 在Safari中是蓝色？
        --color-button var(--gray-10)
        --color-button-disabled var(--gray-5)
        --background-color-button var(--gray-2)
        --background-color-button-focus var(--gray-3)
        --background-color-button-disabled var(--gray-1)
