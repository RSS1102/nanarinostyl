@import './../variable/prefix.styl'
@import './../variable/functions.styl'
@import './../variable/compatible.styl'


/**
 * @init 初始背景色
 * @transparent 透过的按钮当前颜色
 *
 * 当 变量 --percent-button-wave 从 0% -> 100% 时 按钮当前颜色从中心扩散
 * 一般来说 按钮当前颜色要比初始背景色要深
 *
 * 在此之前使用radial-gradient(1%) 然后控制 background-size 100% -> 15000% 来实现 
 * 兼容性更好 见 https://github.com/Deep-Codes/affinity-css/blob/main/components/_button.sass
 */
button_background(init)
    background-color init 
    background-image radial-gradient(circle, 
        transparent 0%,
        transparent var(--percent-button-wave),
        init var(--percent-button-wave), 
        init 100%
    )


.{prefix}-button
    /:root
        --padding-button 5px 12px
        @property --percent-button-wave
            syntax '<percentage>'
            inherits false
            initial-value: 100%

    cursor pointer
    user-select none
    padding var(--padding-button)
    font-size var(--font-size-body)
    line-height var(--line-height-body)
    border-radius var(--border-radius-md)
    border none
    transition --percent-button-wave .8s, box-shadow .3s
    color _rgb(var(--white))
    button_background _rgb(var(--primary-5))
    &:focus-visible
        outline-color _rgb(var(--black))
    &:not([disabled]):hover
        box-shadow var(--box-shadow-drop-bottom)
    &[disabled]
        cursor not-allowed
        background-color _rgb(var(--primary-2))
    &:not([disabled]):focus
        background-color _rgb(var(--primary-6))
    &:not([disabled]):active
        --percent-button-wave 0%
        transition none

    &.sm
        --padding-button 1px 8px
    &.lg
        --padding-button 8px 16px
    
    /**
     * 不使用主题
     */
    &:where(:not([data-primary]))
        color unset // 在Safari中是蓝色？
        --primary-2 var(--gray-1)
        --primary-5 var(--gray-2)
        --primary-6 var(--gray-3)
        &[disabled]
            color _rgb(var(--gray-5))
